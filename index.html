<!DOCTYPE html>
<html>

<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150693316-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-150693316-1');
	</script>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Unsaid Districts</title>
	
	<meta property="og:url" content="https://matheusfreitag.github.io/distritos-nao-ditos/" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Unsaid Districts" />
    <meta property="og:description" content="How Pelotas is mapped by its gastronomy" />
    <meta property="og:image" content="https://i.imgur.com/tgt9s9l.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@matheusfreitag" />
    <meta name="twitter:title" content="Unsaid Districts" />
    <meta name="twitter:description" content="How Pelotas is mapped by its gastronomy" />
    <meta name="twitter:image" content="https://i.imgur.com/tgt9s9l.png" />
    <meta name="twitter:image:alt" content="How Pelotas is mapped by its gastronomy" />



	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Oleo+Script|Nunito:400,400i,900&amp;display=swap" rel="stylesheet">
	<link rel='stylesheet' href='style.css'>


</head>

<body>

	<main>
		<section id='intro'>
			<h1 class='intro__hed'>Unsaid Districts</h1>
			<p class='intro__dek'>
				Pelotas is a city in the interior of Rio Grande do Sul state, in Brazil. In fact, it is
				<a target="_blank" href="https://pt.wikipedia.org/wiki/Lista_de_munic%C3%ADpios_do_Rio_Grande_do_Sul_por_popula%C3%A7%C3%A3o">the largest city in the southern half of the state</a>, and
				it has a strong local cuisine.
				Would this gastronomy be geographically organized in some way? Is it possible that there are unofficial districts that explain the city's eating behavior? That's what we're going to analyze here.
			</p>
		</section>

		<section id='scrolly'>

			<article>
				<div class='step' data-step='1'>
					<h2>Motivation & Methodology</h2>
					<img class="mobile" src="img/dog.jpg" alt="Photo of me and my dog on the sofa ordering food.">
					<p>
						On some nights (And by <i>"some"</i> I mean <i>"more than my bank account would like"</i> ) I usually order food
						with those Delivery apps. It's very comfortable and all I see is the 30-40 minutes between the Order button
						and the delivery at my door.
						<br><br><br>
						Despite all the logistics to make the order arrive at my door, what if I decided to
						<i>GO OUT</i> for dinner?
						<b>Would my cuisine choice affect which part of the city I should go to?</b>
						<br><br><br>
						There would be districts in the city that group
						types of cuisine? That's what I intend to answer here.

						Existiriam distritos na cidade que agrupam
						tipos de gastronomia? É isso que pretendo responder aqui.
						<br>
						<br><br><br>
						Grouping data from recommendation apps, I investigated the location of restaurants to understand their distributions geographically. The results will be seen below.
					</p>

				</div>

				<div class='step' data-step='2'>
					<h2>First, a little spoiler</h2>
					<img class="mobile" src="img/giphy.gif" alt="Gif with multiple dots layed over Pelotas geographic map">
					<p>
						The vast majority of the restaurants are located in the city center of Pelotas.
						In all scenarios, this neighborhood was the one with the most results. Personally, this result was already expected because in Pelotas, the city center also concentrates a large portion of the commercial, service, financial and cultural activity.
						<br><br><br>
						Upfront, we can already conclude that the city center is the most diverse place for gastronomy, so, in cases of doubt, this would be a good place to make choices. Keeping that in mind, let's see which neighborhoods also excel in different types of cuisine.
					</p>

				</div>


				<div class='step' data-step='3'>
					<h2>Pizzas</h2>
					<img class="mobile" src="img/Pizzaria.png" alt="Pins on the map of Pelotas with pizza places locations">
					<p>
						If Pizza is your go-to dish, in Pelotas, there is an interesting number of neighborhoods that can be
						visited. 8 neighborhoods are listed, with Downtown, "Três Vendas" and "Areal" having the most restaurants.
						Of the 50 restaurants returned, Downtown corresponds to 66% of the options, Três Vendas to 10% and Areal to 6%.
						Without the Center, Três Vendas and Areal would have 29% and 17% of the restaurants respectively. 
					</p>
					<div class="canvas-container">
						<canvas id='chart_Pizzarias'></canvas>
					</div>
					<p>
						The chart above (and all of them on this page) are clickable. Try clicking on the caption "Downtown" so that this portion of the chart disappears and the analysis made above with other neighborhoods can be seen.
						The filters used to search those places were "Pizza Place" and "Italian food".
					</p>

				</div>


				<div class='step' data-step='4'>
					<h2>Asian Food</h2>
					<img class="mobile" src="img/Sushi.png" alt="Pins on the map of Pelotas with asian food restaurants locations">
					<p>
						"Asian food" is a very broad term, but my intention here was to look for dishes like "Sushi", "Yakissoba" and typical soups. For this, I filtered restaurants by "Asian", Chinese", "Japanese" and "Sushi".
					</p>
					<div class="canvas-container">
						<canvas id='chart_Asian'></canvas>
					</div>
					<p>
						In this case, only 3 neighborhoods emerged, namely "Downtown", "Areal" and "Laranjal". Of the 9 restaurants, the overwhelming majority are located in the Center, with 78% of the restaurants, followed by Areal and Laranjal, with identical amounts (11% each).
					</p>
				</div>


				<div class='step' data-step='4'>
					<h2>Steak houses</h2>
					<img class="mobile" src="img/Churrascaria.png" alt="Pins on the map of Pelotas with steakhouses locations">
					<p>
						Your author is a vegetarian, but he understands that steakhouses exist and that people look for them.
						In Pelotas, many neighborhoods have a steak house, with 10 neighborhoods returned in the survey.
						After Downtown, Laranjal, Porto and Areal have the largest number of establishments of this type:
					</p>
					<div class="canvas-container">
						<canvas id='chart_Churrascaria'></canvas>
					</div>
					<p>
						Downtown took 55% of the restaurants of this type, followed by Laranjal (10%), Porto (6%) and Areal (6%).
						The filters used were "Barbecue" and "Steakhouse".
					</p>
				</div>




				<div class='step' data-step='5'>
					<h2>Baurus</h2>
					<img class="mobile" src="img/Bauru.png" alt="Pins on the map of Pelotas with lancherias locations">
					<p>
						Pelotas is very famous for its Baurus (a local powered up sandwich). Never tell someone from Pelotas that the bauru of your city is better, because in addition to being a lie, they will be offended.
						Around here, Downtown, Areal and Porto gather most of the Baurus Places (called "Lancherias"), with almost 90% of the Lancherias located in these neighborhoods.
					</p>
					<div class="canvas-container">
						<canvas id='chart_Bauru'></canvas>
					</div>
					<p>
						Among the available filters to search for restaurants, the picked up ones here were "American", "Burger", "Hot Dog" and "Diner".
					</p>
				</div>


				<div class='step' data-step='6'>
					<h2>Candy Shop</h2>
					<img class="mobile" src="img/Docaria.png" alt="Pins on the map of Pelotas with candy shops locations">
					<p>
						Pelotas is nationally known as "The Sweet City". There is an annual festival, "Fenadoce", which celebrates the sweets and candy culture of the city. For olaces who sell those, 5 neighborhoods are more representative, and for the first time, Downtown did not concentrate more than half of the establishments of this type, but it comes close, with 43% of the results:
					</p>
					<div class="canvas-container">
						<canvas id='chart_doces'></canvas>
					</div>
					<p>
						The only filter used for this was "Dessert".
					</p>
				</div>


				<div class='step' data-step='7'>
					<h2>Cafés</h2>
					<img class="mobile" src="img/Cafe.png" alt="Pins on the map of Pelotas with cafés locations">
					<p>
						This category is not usually suited for "dinner", but there are cafés in Delivery apps and I was curious regarding their locations.
						In fact, Pelotas has a lot of them, with 50 establishments returned in 8 different neighborhoods.
						However, the city center has 78% of the examples, and the remaining 22% are divided between 'Porto', 'Três Vendas', 'Areal', 'Padre Reus', 'São Gonçalo', the '5th District' and 'Laranjal'.
					</p>
					<div class="canvas-container">
						<canvas id='chart_cafes'></canvas>
					</div>
					<p>
						The filter used here was "Cafe".
					</p>
				</div>


				<div class='step' data-step='8'>
					<h2>Bars</h2>
					<img class="mobile" src="img/Bares.png" alt="Pins on the map of Pelotas with bars locations">
					<p>
						The city's nightlife seems vibrant, or at least has a structure for it. We have 72 bars, the highest number of results in all categories, divided into 10 different neighborhoods in the city.
As expected, the Center concentrates just over half of the options, with 52% of the results, followed by 'Fragata', 'Três Vendas' and 'Areal'.
					</p>
					<div class="canvas-container">
						<canvas id='chart_bares'></canvas>
					</div>
					<p>
						Filters used were "Bar", "Brew Pub", "Pub" e "Wine Bar".
					</p>
				</div>

			</article>

			<figure>
				<img id="focusImage" class="notFull" src="img/dog.jpg" alt="Photo of me and my dog on the sofa ordering food.">
			</figure>
		</section>

		<section id='resultados'>
			<h2>Conclusion</h2>
			<p>
				Pelotas organizes itself around the local cuisine, but not in the dramatic way I expected. In fact, most of the restaurants are concentrated in the center of the city, and while some neighborhoods stand out in specific types of menus, we have other neighborhoods that do not even appear in the results, or appear briefly with scarce results.
			<br><br>
			The database was obtained from a set of search engines and recommendation apps, so it may be the case that other search engines/apps return different results. The most accurate results would be the ones retrieved from the City Council, but those are not publically available.
			<br>
			Future work may include: Do other search engines return different results? Is it a tendency for smaller cities to concentrate restaurants in their administrative centers or is this a Pelotas trend?
			</p>

			<hr>

			<div class="footer">
				<p>Made by <a target="_blank" href="https://matheusfreitag.github.io">Matheus Freitag</a>.
				<br />Maps were created using <a target="_blank" href="https://www.mapbox.com/mapbox-studio/">Mapbox Studio</a>.
				<br>Charts were made using <a target="_blank" href="https://www.chartjs.org/">ChartJS</a>.</p>
			</div>
		</section>
	</main>

	<!-- <div class='debug'></div> -->
	<script src='https://unpkg.com/d3@5.9.1/dist/d3.min.js'></script>
	<script src='https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js'></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
	<script src='stickyfill.min.js'></script>
	<script src='scrollama.min.js'></script>
	<script>
		// using d3 for convenience
		var main = d3.select('main')
		var scrolly = main.select('#scrolly');
		var figure = scrolly.select('figure');
		var article = scrolly.select('article');
		var step = article.selectAll('.step');

		// initialize the scrollama
		var scroller = scrollama();

		// generic window resize listener event
		function handleResize() {
			// 1. update height of step elements
			var stepH = Math.floor(window.innerHeight );
			step.style('height', stepH + 'px');

			var figureHeight = window.innerHeight / 2
			var figureMarginTop = (window.innerHeight - figureHeight) / 2

			figure
				.style('height', figureHeight + 'px')
				.style('top', figureMarginTop + 'px');


			// 3. tell scrollama to update new element dimensions
			scroller.resize();
		}

		// scrollama event handlers
		function handleStepEnter(response) {
			// console.log(response)
			// response = { element, direction, index }

			// add color to current step only
			step.classed('is-active', function (d, i) {
				return i === response.index;
			})

			// update graphic based on step
			switch(response.index){
				case 0:
					document.getElementById("focusImage").src= 'img/dog.jpg';
					document.getElementById("focusImage").classList = 'notFull';
					break;

				case 1:
					document.getElementById("focusImage").src= 'img/giphy.gif';
					document.getElementById("focusImage").classList = 'full';
					break;

				case 2:
					document.getElementById("focusImage").src= 'img/Pizzaria.png';
					document.getElementById("focusImage").classList = 'full';
					break;

				case 3:
					document.getElementById("focusImage").src= 'img/Sushi.png';
					document.getElementById("focusImage").classList = 'full';
					break;

				case 4:
					document.getElementById("focusImage").src= 'img/Churrascaria.png';
					document.getElementById("focusImage").classList = 'full';
					break;

				case 5:
					document.getElementById("focusImage").src= 'img/Bauru.png';
					document.getElementById("focusImage").classList = 'full';
					break;

				case 6:
					document.getElementById("focusImage").src= 'img/Docaria.png';
					document.getElementById("focusImage").classList = 'full';
					break;

				case 7:
					document.getElementById("focusImage").src= 'img/Cafe.png';
					document.getElementById("focusImage").classList = 'full';
					break;

				case 8:
					document.getElementById("focusImage").src= 'img/Bares.png';
					document.getElementById("focusImage").classList = 'full';
					break;
			}

		}

		function setupStickyfill() {
			d3.selectAll('.sticky').each(function () {
				Stickyfill.add(this);
			});
		}

		function init() {
			setupStickyfill();

			// 1. force a resize on load to ensure proper dimensions are sent to scrollama
			handleResize();

			// 2. setup the scroller passing options
			// 		this will also initialize trigger observations
			// 3. bind scrollama event handlers (this can be chained like below)
			scroller.setup({
				step: '#scrolly article .step',
				offset: 0.55,
				debug: false,
			})
				.onStepEnter(handleStepEnter)


			// setup resize event
			window.addEventListener('resize', handleResize);
		}

		// kick things off
		init();
	</script>
	<script>
		var ctx_pizzarias = document.getElementById('chart_Pizzarias').getContext('2d');
		var pizzariaPie = new Chart(ctx_pizzarias, {
			type: 'pie',
			color: 'white',
			data: {
				labels: ['Downtown', 'Três Vendas', 'Areal', 'Laranjal', 'Porto', 'Fragata', '7º Distrito', '5º Distrito'],
				datasets: [{
					label: 'Pizzarias',
					data: [0.66, 0.1 , 0.06, 0.06, 0.04, 0.04, 0.02, 0.02],
					backgroundColor: ['#D66B67', '#DE965D', '#ECE788', '#B5DB7F', '#8ECDD2', '#8F97CF', '#B6A38F', '#824026', '#31bdf4', '#cc4778']
				}]
    		},
			options: {
				aspectRatio: 1,
        title: {
            display: true,
            text: "Pizza Place per neighbourhood in Pelotas",
            fontColor: 'white'
        },
				legend: {
					labels: {
						fontColor: "white",
					}
				},
			}
		});

		// ---

		var ctx_Asian = document.getElementById('chart_Asian').getContext('2d');
		var AsianPie = new Chart(ctx_Asian, {
			type: 'pie',
			color: 'white',
			data: {
				labels: ['Downtown', 'Areal', 'Laranjal'],
				datasets: [{
					label: 'Asiático',
					data: [0.77777778, 0.11111111, 0.11111111],
					backgroundColor: ['#D66B67', '#DE965D', '#ECE788']
				}]
    		},
			options: {
				aspectRatio: 1,
        title: {
            display: true,
            text: "Asian Restaurants per neighbourhood in Pelotas",
            fontColor: 'white'
        },
				legend: {
					labels: {
						fontColor: "white",
					}
				},
			}
		});

    // ---

		var ctx_Churrascaria = document.getElementById('chart_Churrascaria').getContext('2d');
		var ChurrascariaPie = new Chart(ctx_Churrascaria, {
			type: 'pie',
			color: 'white',
			data: {
				labels: ['Downtown', 'Laranjal', 'Porto', 'Areal', 'Gotuzzo', 'Fragata', '7º Distrito', 'Sítio Floresta', 'Três Vendas', 'São Gonçalo'],
				datasets: [{
					label: 'Churrascaria',
					data: [0.55172414, 0.10344828, 0.06896552, 0.06896552, 0.03448276, 0.03448276, 0.03448276, 0.03448276, 0.03448276, 0.03448276],
					backgroundColor: ['#D66B67', '#DE965D', '#ECE788', '#B5DB7F', '#8ECDD2', '#8F97CF', '#B6A38F', '#824026', '#31bdf4', '#cc4778']
				}]
    		},
			options: {
				aspectRatio: 1,
        title: {
            display: true,
            text: "Steakhouses per neighbourhood in Pelotas",
            fontColor: 'white'
        },
				legend: {
					labels: {
						fontColor: "white",
					}
				},
			}
		});

		// ---

		var ctx_Bauru = document.getElementById('chart_Bauru').getContext('2d');
		var Bauru = new Chart(ctx_Bauru, {
			type: 'pie',
			color: 'white',
			data: {
				labels: ['Downtown', 'Areal', 'Porto', 'Três Vendas', 'Laranjal', 'Fragata'],
				datasets: [{
					label: 'Lanches',
					data: [0.625  , 0.15625, 0.125  , 0.03125, 0.03125, 0.03125],
					backgroundColor: ['#D66B67', '#DE965D', '#ECE788', '#B5DB7F', '#8ECDD2', '#8F97CF', '#B6A38F', '#824026', '#31bdf4', '#cc4778']
				}]
    		},
			options: {
				aspectRatio: 1,
        title: {
            display: true,
            text: "Lancherias per neighbourhood in Pelotas",
            fontColor: 'white'
        },
				legend: {
					labels: {
						fontColor: "white",
					}
				},
			}
		});

		// ---

		var ctx_doces = document.getElementById('chart_doces').getContext('2d');
		var doces = new Chart(ctx_doces, {
			type: 'pie',
			color: 'white',
			data: {
				labels: ['Downtown', 'Laranjal', 'Porto', 'Três Vendas', 'Areal'],
				datasets: [{
					label: 'Doces',
					data: [0.4375, 0.1875, 0.125 , 0.125 , 0.125 ],
					backgroundColor: ['#D66B67', '#DE965D', '#ECE788', '#B5DB7F', '#8ECDD2', '#8F97CF', '#B6A38F', '#824026', '#31bdf4', '#cc4778']
				}]
    		},
			options: {
				aspectRatio: 1,
        title: {
            display: true,
            text: "Candy shops per neighbourhood in Pelotas",
            fontColor: 'white'
        },
				legend: {
					labels: {
						fontColor: "white",
					}
				},
			}
		});

		// ---

		var ctx_cafes = document.getElementById('chart_cafes').getContext('2d');
		var cafes = new Chart(ctx_cafes, {
			type: 'pie',
			color: 'white',
			data: {
				labels: ['Downtown', 'Porto', 'Três Vendas', 'Areal', 'Padre Reus', 'São Gonçalo', '5º Distrito', 'Laranjal'],
				datasets: [{
					label: 'Cafés',
					data: [0.78, 0.06, 0.04, 0.04, 0.02, 0.02, 0.02, 0.02],
					backgroundColor: ['#D66B67', '#DE965D', '#ECE788', '#B5DB7F', '#8ECDD2', '#8F97CF', '#B6A38F', '#824026', '#31bdf4', '#cc4778']
				}]
    		},
			options: {
				aspectRatio: 1,
        title: {
            display: true,
            text: "Cafés per neighbourhood in Pelotas",
            fontColor: 'white'
        },
				legend: {
					labels: {
						fontColor: "white",
					}
				},
			}
		});

		// ---

		var ctx_bares = document.getElementById('chart_bares').getContext('2d');
		var bares = new Chart(ctx_bares, {
			type: 'pie',
			color: 'white',
			data: {
				labels: ['Downtown', 'Fragata', 'Três Vendas', 'Areal', 'Laranjal', 'Porto', 'São Gonçalo', 'Santa Terezinha', 'Padre Reus', 'Getúlio Vargas'],
				datasets: [{
					label: 'Bares',
					data: [0.52777778, 0.125, 0.125, 0.06944444, 0.05555556, 0.02777778, 0.02777778, 0.01388889, 0.01388889, 0.01388889],
					backgroundColor: ['#D66B67', '#DE965D', '#ECE788', '#B5DB7F', '#8ECDD2', '#8F97CF', '#B6A38F', '#824026', '#31bdf4', '#cc4778']
				}]
    		},
			options: {
				aspectRatio: 1,
        title: {
            display: true,
            text: "Bars per neighbourhood in Pelotas",
            fontColor: 'white'
        },
				legend: {
					labels: {
						fontColor: "white",
					}
				},
			}
		});
	</script>
</body>

</html>
